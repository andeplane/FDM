#!/usr/bin/env node
(()=>{"use strict";var e={8413:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(752),o=r(7147),n=r(1017),a=r(9369),s=r(8380),l=r(9575),c=r(3737),d=i.__importStar(r(4556)),u=i.__importDefault(r(6222)),p=r(2778),m=r(2308),g=d.DEBUG.extend("cmds:init");t.default=new class{constructor(){this.aliases=["i"],this.command="init [name]",this.describe="Initialize an existing template solution from templates backend"}builder(e){return e.option("external-id",{type:"string",description:"In which template group this solution belongs to"}).option("project-version",{type:"string",description:"Version for the template group this will be locked to"}).option("backend",{type:"string",description:"Which backend to use for initialization of the project"}).choices("backend",["templates","schema-service"]).option("new-project",{type:"boolean",description:"Create a new project"})}handler(e){return i.__awaiter(this,void 0,void 0,(function*(){let t=Object.assign({},e);if(o.existsSync(n.join(a.cwd(),l.CONSTANTS.PROJECT_CONFIG_FILE_NAME)))return e.logger.error(`Config file (${l.CONSTANTS.PROJECT_CONFIG_FILE_NAME}) already exists in this directory, exiting...`);g("Asking user for selecting backend to use");const{backend:r}=yield s.askUserForInputIfNeeded(e,[{name:"backend",message:"Which backend to use for initialization of the project",required:!0,choices:["templates","schema-service"],type:"autocomplete"}]);if(g(`Backend selected: ${r}`),t=Object.assign(Object.assign({},t),{backend:r}),"schema-service"===r)return g("stopping here, as we are not supporting schema-service yet"),e.logger.warn("Schema service CLI is coming soon!, use templates backend for now, exiting...");g("Asking user if they want to use new project or existing project");const{"new-project":i}=yield s.askUserForInputIfNeeded(e,[{name:"new-project",message:"Start a project from scratch? (by default, use existing project)",required:!0,type:"confirm"}]);g(`New project selected: ${i}`),t=Object.assign(Object.assign({},t),{"new-project":i});const h=c.getCogniteSDKClient();if(g("CDF client initialized"),!0===i)g("Calling create project command to create new project"),yield u.default.handler(t),g("Project created %o",t);else{const r=yield h.templates.groups.list({limit:m.TEMPLATE_GROUP_LIST_LIMIT});g("Templates list retrieved %o",r),g("Asking user for selecting template group to use");const i=yield s.askUserForInputIfNeeded(e,[{name:"external-id",message:"Please select template id from this list",type:"autocomplete",choices:r.items.map((e=>e.externalId)),required:!0}]);g(`Template selected: ${i["external-id"]}`),t=Object.assign(Object.assign({},t),i),g("Fetching project versions for the selected project %o",i["external-id"]);const o=(yield h.templates.group(t["external-id"]).versions.list()).items.map((e=>e.version));if(g("Project versions retrieved %o",o),o.length>0){g("Asking user for selecting project version to use");const e=yield s.askUserForInputIfNeeded(t,[{name:"project-version",message:"Select the version for the template group",required:!0,type:"autocomplete",choices:o.map((e=>e.toString()))}]);g(`Project version selected: ${e["project-version"]}`),t=Object.assign(Object.assign({},t),e)}if(t["project-version"]&&!o.includes(parseInt(t["project-version"],10)))throw new Error(`Version ${t["project-version"]} does not exist, please make sure you have the right version`)}g("Writing the config file"),yield p.makeCDFRCFile(t["external-id"],t.backend,t["project-version"]),g("DONE"),d.default.success(`Solution "${t["external-id"]}" is successfully initialized!`)}))}}},3511:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateClientId=t.validateApiKey=t.validateClientSecret=t.validateClusterName=t.handler=t.builder=t.desc=t.command=void 0;const i=r(752),o=r(9575),n=r(2477),a=r(3737);t.command="login [project]",t.desc="Login to Cognite Data Fusion",t.builder=e=>e.usage("$0 login [project]").example("$0 login cognite","Login to cognite tenant").positional("project",{alias:"p",type:"string",description:"CDF Project Name",default:"platypus"}).option("client-id",{type:"string",description:"AAD Application's Client ID"}).check(t.validateClientId).option("client-secret",{type:"string",description:"AAD Application's Client Secret generated by the user they have long expiry and are hence suitable for CI/CD"}).check(t.validateClientSecret).option("api-key",{type:"string",description:"API Key for legacy login"}).check(t.validateApiKey).coerce("api-key",(e=>e||process.env.API_KEY)).option("tenant",{type:"string",default:"cogniteappdev.onmicrosoft.com",description:"Azure Active Directory Tenant URI or ID"}).option("cluster",{type:"string",default:"greenfield",description:"Cluster Name"}).check(t.validateClusterName).option("auth-type",{type:"string",default:o.AUTH_TYPE.PKCE,description:"Auth type"}).choices("auth-type",[o.AUTH_TYPE.PKCE,o.AUTH_TYPE.CLIENT_SECRET,o.AUTH_TYPE.APIKEY,o.AUTH_TYPE.DEVICE_CODE]),t.handler=e=>i.__awaiter(void 0,void 0,void 0,(function*(){const t=a.getCogniteSDKClient();yield n.promiseWithTimeout(o.SETTINGS.TIMEOUT,(()=>i.__awaiter(void 0,void 0,void 0,(function*(){switch(e.authType){case o.AUTH_TYPE.APIKEY:yield t.assets.list({limit:1});break;case o.AUTH_TYPE.DEVICE_CODE:case o.AUTH_TYPE.CLIENT_SECRET:case o.AUTH_TYPE.PKCE:if(!(yield t.get("/api/v1/token/inspect")).data.projects.some((t=>t.projectUrlName===e.project)))throw new Error(`failed to authenticate against CDF project: ${e.project}`)}}))),"Timeout while authenticating user, please make sure you have entered valid parameters like cluster, project etc."),e.logger.success("Login Success")})),t.validateClusterName=({cluster:e})=>!!/^[a-zA-Z0-9-_]+$/.test(e)||'Cluster name is invalid, make sure its just the name of the cluster; For example if its "api.cognitedata.com" just enter "api"',t.validateClientSecret=({clientSecret:e,authType:t})=>!!(t!==o.AUTH_TYPE.CLIENT_SECRET||e&&""!==e)||"client-secret can't be empty string",t.validateApiKey=({apiKey:e,authType:t})=>!!(t!==o.AUTH_TYPE.APIKEY||e&&""!==e)||"api-key must be provided for legacy auth",t.validateClientId=({clientId:e,authType:t})=>!!(t!==o.AUTH_TYPE.CLIENT_SECRET||e&&""!==e)||"client-id must be provided for clientSecret auth"},7858:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(752).__importDefault(r(5732));t.default=new class{constructor(){this.command="logout",this.describe="Logout CDF User (globally)"}handler(e){i.default(),e.logger.success("You have been logged-out successfully!")}}},324:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateApiSpecCommand=t.commandArgs=void 0;const i=r(752),o=r(5540),n=r(7052),a=i.__importDefault(r(4556)),s=r(4556),l=r(2640);t.commandArgs=[{name:"externalId",description:"Api ExternalId",prompt:"Enter unique ExternalId for the Api",type:o.CommandArgumentType.STRING,required:!0,example:'$0 solutions api create --externalId=test-id --description="some description" '},{name:"description",description:"Api description",prompt:"Enter description for your Api",type:o.CommandArgumentType.STRING,required:!0}];const c=s.DEBUG.extend("solutions:api:create");class d extends n.CLICommand{execute(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=l.getSolutionHandler();c("SolutionsApiService initialized");const r=yield t.create({name:e.externalId,description:e.description});if(!r.isSuccess)throw r.error;c("Api was saved successfully, %o",JSON.stringify(r.getValue(),null,2)),a.default.success(`Api - "${e.externalId}" is created successfully`)}))}}t.CreateApiSpecCommand=d,t.default=new d("create","Create or update api",t.commandArgs)},6455:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handler=t.builder=t.desc=t.command=void 0;const i=r(752),o=i.__importDefault(r(5881)),n=i.__importDefault(r(324)),a=i.__importStar(r(7586));t.command="api <command>",t.desc="Manage solution APIs",t.builder=e=>e.command(o.default).command(n.default).command(a).demandCommand(1),t.handler=()=>{}},5881:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionsApiSpecsListCommand=void 0;const i=r(752),o=r(7052),n=i.__importStar(r(4556)),a=r(2640),s=n.DEBUG.extend("solutions:api:list");class l extends o.CLICommand{execute(){return i.__awaiter(this,void 0,void 0,(function*(){const e=a.getSolutionHandler();s("SolutionsApiService initialized");const t=yield e.list();if(!t.isSuccess)throw t.error;s("List of apis retrieved successfully, %o",JSON.stringify(t.getValue(),null,2)),n.default.success(t.getValue().map((e=>e.id)).join("\n"))}))}}t.SolutionsApiSpecsListCommand=l,t.default=new l("list","List all APIs for current project",[])},7586:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handler=t.builder=t.desc=t.command=void 0;const i=r(752),o=i.__importDefault(r(4013)),n=i.__importDefault(r(1518));t.command="versions <command>",t.desc="Manage Api schema versions",t.builder=e=>e.command(o.default).command(n.default).demandCommand(1),t.handler=()=>{}},4013:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionsApiSpecVersionsListCommand=t.commandArgs=void 0;const i=r(752),o=r(7052),n=i.__importStar(r(4556)),a=r(5540),s=r(2640);t.commandArgs=[{name:"externalId",description:"Api ExternalId",prompt:"Enter the Api ExternalId",type:a.CommandArgumentType.STRING,required:!0,example:"$0 solutions api versions list --externalId=test-id"}];const l=n.DEBUG.extend("solutions:api:versions:list");class c extends o.CLICommand{execute(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=s.getSolutionSchemaHandler();l("SolutionsApiService initialized");const r=yield t.versions({solutionId:e.externalId});if(!r.isSuccess)throw r.error;const i=r.getValue();l("List of api versions retrieved successfully, %o",JSON.stringify(i,null,2)),n.default.success(i.map((e=>e.version)).join("\n"))}))}}t.SolutionsApiSpecVersionsListCommand=c,t.default=new c("list","List all API Specs versions for current project",t.commandArgs)},1518:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateApiSpecVersionCommand=t.commandArgs=void 0;const i=r(752),o=r(5540),n=r(7052),a=i.__importDefault(r(4556)),s=r(4556),l=r(7147),c=r(2640);t.commandArgs=[{name:"externalId",description:"Api ExternalId",prompt:"Enter the API externalId",type:o.CommandArgumentType.STRING,required:!0,example:"$0 solutions api versions publish --externalId=test-id --file=./file.graphql --apiVersion=1"},{name:"file",description:"Schema file path",prompt:"Please specify the the path to the schema file that you want to publish",type:o.CommandArgumentType.STRING,required:!0},{name:"bindings",description:"Schema Bindings file path",prompt:"Please specify the the path to the schema bindings file that you want to use",type:o.CommandArgumentType.STRING,required:!1},{name:"conflictMode",description:"The conflict mode that will be used when an existing schema already exists.",prompt:"Please specify the conflict mode that you want to use",type:o.CommandArgumentType.SELECT,initial:"NEW_VERSION",required:!1,options:{choices:["PATCH","NEW_VERSION"]}},{name:"apiVersion",description:"Api Version",prompt:"Enter the API version in case if you want to update",type:o.CommandArgumentType.STRING,required:!1}];const d=s.DEBUG.extend("solutions:api:versions:publish");class u extends n.CLICommand{execute(e){return i.__awaiter(this,void 0,void 0,(function*(){const{conflictMode:t,externalId:r,apiVersion:i,bindings:o}=e,n=c.getSolutionSchemaHandler();d("SolutionsApiService initialized"),d("Reading specified graphql file");const s=l.readFileSync(e.file,{encoding:"utf-8"}).toString();let u;if(d("Schema contents %o",s),o){try{d("Reading specified bindings file"),u=l.readFileSync(o,{encoding:"utf-8"}).toString(),u=JSON.parse(u)}catch(t){throw d(JSON.stringify(t,null,2)),a.default.error(e.verbose?JSON.stringify(t,null,2):t.message),t}d("Schema bindings contents %o",u)}const p={schema:s,solutionId:r,version:i,bindings:u},m=yield"NEW_VERSION"===t?n.publish(p):n.update(p);if(!m.isSuccess)throw m.error;d("Api version was published successfully, %o",JSON.stringify(m.getValue(),null,2)),a.default.log("The Api version was published successfully")}))}}t.CreateApiSpecVersionCommand=u,t.default=new u("publish","Publish API Schema Version",t.commandArgs)},3842:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(752),o=r(1286),n=r(7052),a=i.__importStar(r(1749)),s=i.__importStar(r(6637)),l=i.__importStar(r(1984)),c=i.__importStar(r(7367)),d=i.__importStar(r(3333)),u=r(5540),p=r(9369),m=r(9575),g=r(2308),h=r(3737),f=r(9575),_=r(7343),S=r(7147),{readFile:v,stat:y,writeFile:T}=S.promises,C=r(1017),A=r(4556).DEBUG.extend("solutions:generate"),E=[{name:"project-name",description:"The name of the project",required:!0,type:u.CommandArgumentType.STRING,prompt:"What is the name of the project?",help:"The name of the project",example:"--project-name=schema-test"},{name:"api-name",description:"The name of the API",required:!0,type:u.CommandArgumentType.STRING,prompt:"What is the name of the API?",help:"The name of the API",example:"--api-name=movieApi"},{name:"plugins",description:"Plugin which will be use for code generation (each plugin-name separated by space)",required:!0,type:u.CommandArgumentType.MULTI_SELECT,prompt:"Select the plugin to generate the types, we currently support few of the @graphql-codegen plugins only",options:{choices:m.SupportedGraphQLGeneratorPlugins},example:`--plugins=${m.SupportedGraphQLGeneratorPlugins.join(" ")}`},{name:"operations-file",description:"Path to the operations.graphql file",required:!1,type:u.CommandArgumentType.STRING,prompt:"Enter the path to the operations.graphql file"},{name:"output-file",description:"The file name of the generated code",required:!1,type:u.CommandArgumentType.STRING,alias:"f",initial:"generated-types.ts"}];class O extends n.CLICommand{execute(e){return i.__awaiter(this,void 0,void 0,(function*(){try{const t=h.getCogniteSDKClient();A("Initialize the Cognite SDK client");const r=new g.SolutionsApiService(t);A("Fetching the introspection query from the server");const i=yield r.runQuery({solutionId:e["project-name"],schemaVersion:"1",extras:{apiName:e["api-name"]},graphQlParams:{query:_.getIntrospectionQuery(),operationName:"IntrospectionQuery"}});if(A(`got introspection query response: ${JSON.stringify(i)}`),i.errors)return A(`got errors: ${JSON.stringify(i.errors)}`),i.errors.length>0?e.logger.error(i.errors.map((e=>e.message)).join("\n")):e.logger.error("Failed to obtain results from introspection query");let n=[];if(e["operations-file"]&&(yield y(C.resolve(e["operations-file"]))).isFile()){A(`got operations file: ${e["operations-file"]}`);const t=C.resolve(e["operations-file"]),r=yield v(t,"utf8");n=[{document:_.parse(r)}]}else e.logger.warn("No operations file provided, skipping operation generations");A("Generating the code, this may take a while");const u=yield o.codegen({filename:e["output-file"],config:{},documents:n,schema:_.parse(_.printSchema(_.buildClientSchema(i.data))),plugins:e.plugins.map((e=>({[e]:{}}))),pluginMap:{[f.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT]:a,[f.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT_OPERATIONS]:s,[f.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT_RESOLVERS]:l,[f.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT_REACT_APOLLO]:c,[f.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT_APOLLO_ANGULAR]:d}});A(`generated code: ${u}`),yield T(C.join(p.cwd(),e["output-file"]),u),A("Done"),e.logger.success(`Successfully generated types in ${e["output-file"]}`)}catch(t){A(`got error: ${JSON.stringify(t)}`),e.logger.error(t)}}))}}t.default=new O("generate","Generate will help to generate a graphql client code for the schema you provide by fetching the introspection query from the server",E)},3237:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handler=t.builder=t.aliases=t.desc=t.command=void 0;const i=r(752),o=i.__importDefault(r(3842)),n=i.__importStar(r(6455)),a=i.__importStar(r(4449));t.command="solutions <command>",t.desc="Manage solutions",t.aliases=["s"],t.builder=e=>{const t=e.command(o.default);return process.env.ENABLE_EXPERIMENTAL_CMDS&&t.command(n).command(a),t.demandCommand(1),t},t.handler=()=>{}},4449:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handler=t.builder=t.desc=t.command=void 0;const i=r(752),o=i.__importDefault(r(9880)),n=i.__importDefault(r(7355)),a=i.__importDefault(r(1532)),s=i.__importDefault(r(2663));t.command="storage <command>",t.desc="Manage storage",t.builder=e=>e.command(o.default).command(n.default).command(a.default).command(s.default).demandCommand(1),t.handler=()=>{}},2663:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IngestInstancesCommand=t.commandArgs=void 0;const i=r(752),o=r(5540),n=r(7052),a=i.__importDefault(r(4556)),s=r(4556),l=r(2640),c=r(7147);t.commandArgs=[{name:"file",alias:"f",description:"File that contains the data that you want to ingest",prompt:"Please specify the the path to the file that contains the data that you want to ingest",type:o.CommandArgumentType.STRING,required:!0}];const d=s.DEBUG.extend("solutions:storage:ingest");class u extends n.CLICommand{execute(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=l.getSchemaApiService();let r;d("SolutionsApiService initialized"),d("Reading specified file");try{d("Reading specified file"),r=c.readFileSync(e.file,{encoding:"utf-8"}).toString(),r=JSON.parse(r)}catch(t){throw d(JSON.stringify(t,null,2)),a.default.error(e.verbose?JSON.stringify(t,null,2):t.message),t}d("File contents %o",r);const i=yield t.ingestInstancesIntoStorage(r);d("The data was ingested successfully, %o",JSON.stringify(i,null,2)),a.default.success("Request was completed successfully")}))}}t.IngestInstancesCommand=u,t.default=new u("ingest","Ingest data",t.commandArgs)},1532:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionsStorageListInstancesCommand=t.commandArgs=void 0;const i=r(752),o=r(7052),n=r(5540),a=i.__importStar(r(4556)),s=r(7147),l=r(2640),c=a.DEBUG.extend("solutions:storage:list");t.commandArgs=[{name:"file",alias:"f",description:"File that contains the request payload",prompt:"Please specify the the path to the file that contains the request payload",type:n.CommandArgumentType.STRING,required:!0}];class d extends o.CLICommand{execute(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=l.getSchemaApiService();let r;c("SolutionsApiService initialized");try{c("Reading specified file"),r=s.readFileSync(e.file,{encoding:"utf-8"}).toString(),r=JSON.parse(r)}catch(t){throw c(JSON.stringify(t,null,2)),a.default.error(e.verbose?JSON.stringify(t,null,2):t.message),t}c("File contents %o",r);const i=yield t.listStorageInstances(r);c("List of instances retrieved successfully, %o",JSON.stringify(i,null,2)),a.default.success(JSON.stringify(i,null,2))}))}}t.SolutionsStorageListInstancesCommand=d,t.default=new d("list-instances","List data model instances (ingested data) for a project",t.commandArgs)},9880:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionsStorageListCommand=t.commandArgs=void 0;const i=r(752),o=r(7052),n=r(5540),a=i.__importStar(r(4556)),s=r(2640),l=a.DEBUG.extend("solutions:storage:list");t.commandArgs=[{name:"view",description:"View data as LIST or JSON",prompt:"How do you want to view the data",type:n.CommandArgumentType.SELECT,options:{choices:["LIST","JSON"]},required:!1,example:"$0 solutions storage list --view=JSON"}];class c extends o.CLICommand{execute(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=s.getSchemaApiService();l("SolutionsApiService initialized");const r=yield t.listStorage();l("List of apis retrieved successfully, %o",JSON.stringify(r,null,2)),"JSON"===e.view?a.default.success(JSON.stringify(r,null,2)):a.default.success(r.map((e=>e.externalId)).join("\n"))}))}}t.SolutionsStorageListCommand=c,t.default=new c("list","List the storage for the data models in your project",t.commandArgs)},7355:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpsertStorageCommand=t.commandArgs=void 0;const i=r(752),o=r(5540),n=r(7052),a=i.__importDefault(r(4556)),s=r(4556),l=r(2640),c=r(7147);t.commandArgs=[{name:"file",alias:"f",description:"File that contains the list of the data models to create.",prompt:"Please specify the the path to the file that contains the list of the data models you want to create.",type:o.CommandArgumentType.STRING,required:!0}];const d=s.DEBUG.extend("solutions:storage:upsert");class u extends n.CLICommand{execute(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=l.getSchemaApiService();let r;d("SolutionsApiService initialized"),d("Reading specified file");try{d("Reading specified file"),r=c.readFileSync(e.file,{encoding:"utf-8"}).toString(),r=JSON.parse(r)}catch(t){throw d(JSON.stringify(t,null,2)),a.default.error(e.verbose?JSON.stringify(t,null,2):t.message),t}d("File contents %o",r);const i=yield t.upsertStorage(r);d("The data models storage was created/updated successfully, %o",JSON.stringify(i,null,2)),a.default.success("Request was completed successfully")}))}}t.UpsertStorageCommand=u,t.default=new u("upsert","Create or update storage",t.commandArgs)},2640:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSolutionSchemaHandler=t.getSolutionHandler=t.getSchemaApiService=void 0;const i=r(2308),o=r(3737);t.getSchemaApiService=()=>{const e=o.getCogniteSDKClient();return new i.SolutionsApiService(e)},t.getSolutionHandler=()=>new i.SolutionsHandler(new i.SolutionMixerApiFacadeService(t.getSchemaApiService())),t.getSolutionSchemaHandler=()=>new i.SolutionSchemaHandler(new i.SolutionMixerApiFacadeService(t.getSchemaApiService()))},6832:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(752).__importDefault(r(3593)),o=r(5022),n=r(1781),a=r(4556),s=r(9575),l=a.DEBUG.extend("cmd:status");t.default=new class{constructor(){this.command="status",this.describe="Check user login status (fails if not logged-in)"}handler(e){const t=n.getConfig(),r=t.get(s.ROOT_CONFIG_KEY.AUTH),{project:a,cluster:c,tenant:d,msalAccountInfo:u}=r;l("Global config is stored at %s",t.path);const p=new i.default({head:["Status",o.green("User is authenticated")]});if(p.push(["Tenant",d],["Cluster",c],["Project",a]),u){let e="",t="";try{const r=JSON.parse(u);(null==r?void 0:r.username)&&(e=r.username),(null==r?void 0:r.name)&&(t=r.name)}finally{p.push(["Username",e],["Name",t])}}e.logger.log(p.toString())}}},6222:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateTemplateGroupCommand=t.commandArgs=void 0;const i=r(752),o=r(2308),n=r(3737),a=r(5540),s=r(7052),l=i.__importStar(r(4556)),c=l.DEBUG.extend("cmds:templates:create");t.commandArgs=[{name:"external-id",description:"Template group external id",prompt:"Enter unique name for the template group",type:a.CommandArgumentType.STRING,required:!0,example:'$0 templates create --externalId=test-id --description="some description" --owner=email-addres@domain.tld'},{name:"description",description:"Template group description",prompt:"Enter description for your template group",type:a.CommandArgumentType.STRING},{name:"owner",description:"Template group owner's email address",prompt:"Enter template group owner's email address",type:a.CommandArgumentType.STRING}];class d extends s.CLICommand{execute(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=n.getCogniteSDKClient();c("CDF Client initialized");const r=new o.TemplatesApiService(t);c("Templates API service initialized"),yield r.createTemplateGroup({name:e["external-id"],description:e.description,owner:e.owner}),c("Template group created"),l.default.success(`Template group "${e["external-id"]}" is created successfully`)}))}}t.CreateTemplateGroupCommand=d,t.default=new d("create","Create a template group",t.commandArgs)},4525:(e,t,r)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteTemplateGroupCommand=t.commandArgs=t.desc=t.command=void 0;const o=r(752),n=r(2308),a=r(3737),s=r(5540),l=r(7052),c=o.__importStar(r(4556)),d=r(2778),u=r(9760),p=r(7147),m=r(9575),g=r(1017),h=r(9369),{unlink:f}=p.promises;t.command="delete",t.desc="Delete a template group";const _=c.DEBUG.extend("templates:delete");t.commandArgs=[{name:"confirm",description:"Do not ask for confirmation",prompt:"Are you sure you want to delete this template group?",type:s.CommandArgumentType.BOOLEAN,required:!0,example:"$0 templates delete --confirm"}];class S extends l.CLICommand{execute(e){return o.__awaiter(this,void 0,void 0,(function*(){try{const t=e.solutionConfig.all.config.templateId;if(e.confirm){_`Deleting template group ${t}`;const r=a.getCogniteSDKClient();_`CDF Client Initialized`;const i=new n.TemplatesApiService(r);_`Templates API Initialized`,yield i.deleteTemplateGroup({id:t}),_`Template group deleted successfully`,c.default.log(`Deleted the template group "${t}" successfully.`),f(g.join(h.cwd(),m.CONSTANTS.PROJECT_CONFIG_FILE_NAME)).catch((e=>{_`${e}`,c.default.error("Failed to delete the project config file")}));const o=e.solutionConfig.get("config.schema");o&&f(g.join(h.cwd(),o)).catch((e=>{_`${e}`,c.default.error("Failed to delete the schema file")}))}}catch(e){_`${e}`,c.default.error(`Failed to delete template group: ${e.message}`)}}))}}o.__decorate([d.injectRCFile(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",["function"==typeof(i=void 0!==u.Arguments&&u.Arguments)?i:Object]),o.__metadata("design:returntype",Promise)],S.prototype,"execute",null),t.DeleteTemplateGroupCommand=S,t.default=new S(t.command,t.desc,t.commandArgs)},5856:(e,t,r)=>{var i;Object.defineProperty(t,"__esModule",{value:!0});const o=r(752),n=r(9760),a=r(1286),s=r(7052),l=r(2778),c=o.__importStar(r(1749)),d=o.__importStar(r(6637)),u=o.__importStar(r(1984)),p=o.__importStar(r(7367)),m=o.__importStar(r(3333)),g=r(5540),h=r(9369),f=r(9575),_=r(2308),S=r(3737),v=r(9575),y=r(7343),T=r(7147),{readFile:C,stat:A,writeFile:E}=T.promises,O=r(1017),P=[{name:"plugins",description:"Plugin which will be use for code generation",required:!0,type:g.CommandArgumentType.MULTI_SELECT,prompt:"Select the plugin to generate the types, we currently support few of the @graphql-codegen plugins only",options:{choices:f.SupportedGraphQLGeneratorPlugins}},{name:"operations-file",description:"Path to the operations.graphql file",required:!1,type:g.CommandArgumentType.STRING,prompt:"Enter the path to the operations.graphql file"},{name:"output-file",description:"The file name of the generated code",required:!1,type:g.CommandArgumentType.STRING,alias:"f",initial:"generated-types.ts"}];class I extends s.CLICommand{execute(e){return o.__awaiter(this,void 0,void 0,(function*(){try{const t=S.getCogniteSDKClient(),r=new _.TemplatesApiService(t),i=yield r.runQuery({solutionId:e.solutionConfig.all.config.templateId,schemaVersion:e.solutionConfig.all.config.templateVersion.toString(),graphQlParams:{query:y.getIntrospectionQuery(),operationName:"IntrospectionQuery"}});if(i.errors)return e.logger.error("Failed to obtain results from introspection query");let o=[];if(e["operations-file"]&&(yield A(O.resolve(e["operations-file"]))).isFile()){const t=O.resolve(e["operations-file"]),r=yield C(t,"utf8");o=[{document:y.parse(r)}]}else e.logger.warn("No operations file provided, skipping operation generations");const n=yield a.codegen({filename:e["output-file"],config:{},documents:o,schema:y.parse(y.printSchema(y.buildClientSchema(i.data))),plugins:e.plugins.map((e=>({[e]:{}}))),pluginMap:{[v.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT]:c,[v.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT_OPERATIONS]:d,[v.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT_RESOLVERS]:u,[v.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT_REACT_APOLLO]:p,[v.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT_APOLLO_ANGULAR]:m}});yield E(O.join(h.cwd(),e["output-file"]),n),e.logger.success("Types generated successfully")}catch(t){e.logger.error(t)}}))}}o.__decorate([l.injectRCFile(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",["function"==typeof(i=void 0!==n.Arguments&&n.Arguments)?i:Object]),o.__metadata("design:returntype",Promise)],I.prototype,"execute",null),t.default=new I("generate","Generate will help to generate a graphql client code for the schema of the current template",P)},350:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handler=t.builder=t.aliases=t.desc=t.command=void 0;const i=r(752),o=i.__importDefault(r(104)),n=i.__importDefault(r(6222)),a=i.__importDefault(r(4525)),s=i.__importStar(r(859)),l=i.__importDefault(r(5856));t.command="templates <command>",t.desc="Manage templates",t.aliases=["t"],t.builder=e=>e.command(o.default).command(n.default).command(a.default).command(s).command(l.default).demandCommand(1,"need one valid sub command"),t.handler=()=>{}},104:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemplatesListCommand=void 0;const i=r(752),o=r(2308),n=r(7052),a=i.__importStar(r(4556)),s=r(3737),l=a.DEBUG.extend("cmd:templates:list");class c extends n.CLICommand{execute(){return i.__awaiter(this,void 0,void 0,(function*(){const e=s.getCogniteSDKClient();l("CDF Clint initialized");const t=new o.TemplatesApiService(e);l("TemplatesApiService initialized");const r=yield t.listTemplateGroups();l("List of templates retrieved successfully, %o",JSON.stringify(r,null,2)),a.default.success(r.map((e=>e.externalId)).join("\n"))}))}}t.TemplatesListCommand=c,t.default=new c("list","List all template groups for current project",[])},859:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handler=t.builder=t.desc=t.command=void 0;const i=r(752),o=i.__importStar(r(9331)),n=i.__importDefault(r(4166)),a=i.__importDefault(r(567));t.command="schema <command>",t.desc="Manages templates schemas",t.builder=e=>e.command(o).command(n.default).command(a.default).demandCommand(1),t.handler=()=>{}},4166:(e,t,r)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TemplatesPublishSchemaCommand=t.desc=t.command=void 0;const o=r(752),n=r(2308),a=r(7147),s=r(9760),l=r(5540),c=r(7052),d=r(3737),u=o.__importDefault(r(4556)),p=r(2778),m=[{name:"conflictMode",description:"The Template Group conflict mode that will be used when an existing schema already exists.",prompt:"Please specify the conflict mode that you want to use",type:l.CommandArgumentType.SELECT,initial:"Patch",required:!1,options:{choices:["Patch","Update","Force"]}}];t.command="publish",t.desc="A new version of the template schema will be published";class g extends c.CLICommand{execute(e){return o.__awaiter(this,void 0,void 0,(function*(){const t=d.getCogniteSDKClient(),r=new n.TemplatesApiService(t),{conflictMode:i}=e,{templateId:o,templateVersion:s,schema:l}=e.solutionConfig.all.config;if(!l)throw new Error("No schema found in solution config, please run pull to download schema first or edit and add the schema field in the solution config the the schema file.");const c={schema:a.readFileSync(l,{encoding:"utf-8"}).toString(),solutionId:o,version:s?s.toString():void 0};try{yield"Update"===i?r.publishSchema(c):r.updateSchema(c,"Force"===i),u.default.success("Update"===i?`Template group ${o} is created successfully`:`Template group "${o}" was updated successfully`)}catch(t){if("BREAKING_CHANGE"===t.type)u.default.log("Breaking changes found, please run:\nconflictMode=Update to publish new version\nconflictMode=Force to force update the schema");else{const{code:r,message:i}=t;u.default.error(e.verbose?JSON.stringify(t,null,2):`${r} - ${i}`)}}}))}}o.__decorate([p.injectRCFile(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",["function"==typeof(i=void 0!==s.Arguments&&s.Arguments)?i:Object]),o.__metadata("design:returntype",Promise)],g.prototype,"execute",null),t.TemplatesPublishSchemaCommand=g,t.default=new g(t.command,t.desc,m)},567:(e,t,r)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TemplatesSchemaPullCommand=t.desc=t.command=void 0;const o=r(752),n=r(2308),a=r(9760),s=r(7052),l=r(3737),c=o.__importStar(r(4556)),d=r(5540),u=r(2778),p=r(9575),m=r(7147),{writeFile:g}=m.promises;t.command="pull",t.desc=`Downloads the schema for the given template group (version is read from "${p.CONSTANTS.PROJECT_CONFIG_FILE_NAME}" file).`;const h=c.DEBUG.extend("templates:schema:pull"),f=[{name:"file",alias:"f",description:"schema file name",type:d.CommandArgumentType.STRING,required:!1,initial:p.CONSTANTS.PROJECT_CONFIG_DEFAULT_SCHEMA_FILE_NAME}];class _ extends s.CLICommand{execute(e){return o.__awaiter(this,void 0,void 0,(function*(){const t=l.getCogniteSDKClient();h`CDF Clint initialized`;const r=new n.TemplatesApiService(t);h`TemplatesApiService initialized`,h`Retrieving list of versions for template group`;const i=e.solutionConfig.all.config.templateVersion,o=yield r.listSchemaVersions({solutionId:e.solutionConfig.all.config.templateId,version:0===i?void 0:i.toString()});return h`Got the schema, ${JSON.stringify(o)}`,o&&o.length?o.length>1?(h("More than one schema found for this version. %o",o),c.default.error("More than one schema found for this version, skipping download.")):(h("Writing schema to file"),yield g(e.file,o[0].schema),h("Schema written to file successfully %o",o[0].schema),h("Setting the config file to the downloaded schema file name"),e.solutionConfig.set("config.schema",e.file),h("DONE"),void c.default.success("Schema pulled successfully")):c.default.error("There is no schema for this template group and version combination. Please check once again!")}))}}o.__decorate([u.injectRCFile(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",["function"==typeof(i=void 0!==a.Arguments&&a.Arguments)?i:Object]),o.__metadata("design:returntype",Promise)],_.prototype,"execute",null),t.TemplatesSchemaPullCommand=_,t.default=new _(t.command,t.desc,f)},9331:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.handler=t.builder=t.desc=t.command=void 0;const i=r(752).__importDefault(r(2074));t.command="versions <command>",t.desc="Manage template schema versions",t.builder=e=>e.command(i.default).demandCommand(1),t.handler=()=>{}},2074:(e,t,r)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TemplatesVersionsListCommand=t.desc=t.command=void 0;const o=r(752),n=r(2308),a=r(9760),s=r(7052),l=r(3737),c=o.__importStar(r(4556)),d=r(2778);t.command="list",t.desc="Retrieves a list of versions sorted in descending order.";const u=c.DEBUG.extend("templates:schema:versions:list");class p extends s.CLICommand{execute(e){return o.__awaiter(this,void 0,void 0,(function*(){const t=l.getCogniteSDKClient();u`CDF Clint initialized`;const r=new n.TemplatesApiService(t);u`TemplatesApiService initialized`,u`Retrieving list of versions for template group`;const i=yield r.listSchemaVersions({solutionId:e.solutionConfig.all.config.templateId});if(u`List of versions retrieved successfully, ${JSON.stringify(i)}`,!i||!i.length)return c.default.error("There are no schemas created for this template group. Please create one!");c.default.success(i.map((e=>e.version)).join("\n"))}))}}o.__decorate([d.injectRCFile(),o.__metadata("design:type",Function),o.__metadata("design:paramtypes",["function"==typeof(i=void 0!==a.Arguments&&a.Arguments)?i:Object]),o.__metadata("design:returntype",Promise)],p.prototype,"execute",null),t.TemplatesVersionsListCommand=p,t.default=new p(t.command,t.desc,[])},5329:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessTokenForClientSecret=void 0;const i=r(752),o=r(4705),n=r(7005),a=r(6761),s=r(4556).DEBUG.extend("auth:client-secret");t.getAccessTokenForClientSecret=e=>i.__awaiter(void 0,void 0,void 0,(function*(){const{clientId:t,clientSecret:r,authority:i,baseUrl:l}=e,c=[`${l}/.default`,"offline_access"],d=new o.ConfidentialClientApplication({auth:{clientId:t,clientSecret:r},cache:{cachePlugin:n.cachePlugin}});return n.readFromCache(d.getTokenCache()),s("Starting to aquire client credential token"),d.acquireTokenByClientCredential({scopes:c,authority:i}).then(a.handleResponse)}))},6761:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isTokenExpired=t.handleResponse=void 0;const i=r(752),o=i.__importDefault(r(5567)),n=r(9575),a=r(1781);t.handleResponse=e=>i.__awaiter(void 0,void 0,void 0,(function*(){return a.setProjectConfig({[n.AUTH_CONFIG.ACCOUNT_INFO]:JSON.stringify(e.account)}),e})),t.isTokenExpired=e=>Date.now()>=1e3*o.default(e).exp},3091:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessTokenForDeviceCode=void 0;const i=r(752),o=r(4705),n=r(7005),a=r(6761),s=i.__importDefault(r(2711));t.getAccessTokenForDeviceCode=e=>i.__awaiter(void 0,void 0,void 0,(function*(){const{clientId:t,authority:r,baseUrl:i,account:l}=e,c=[`${i}/IDENTITY`,`${i}/user_impersonation`,"offline_access"],d=new o.PublicClientApplication({auth:{clientId:t,authority:r},cache:{cachePlugin:n.cachePlugin}}),u=l?JSON.parse(l):void 0;n.readFromCache(d.getTokenCache());let p=null;if(u)try{return p=yield d.acquireTokenSilent({account:u,scopes:c}),a.handleResponse(p)}catch(e){throw new Error("Failed to authenticate, please sign in again!")}if(p=yield d.acquireTokenByDeviceCode({deviceCodeCallback:({userCode:t,verificationUri:r})=>{s.default.generate(r,{small:!0},(i=>{e.logger.info("To sign in, please use a web browser to open this page:"),e.logger.log(i),e.logger.info(r),e.logger.info("And enter:"),e.logger.info(t)}))},scopes:c}),p)return a.handleResponse(p);throw new Error("Failed to authenticate")}))},4764:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(752);i.__exportStar(r(6761),t),i.__exportStar(r(5329),t),i.__exportStar(r(9712),t),i.__exportStar(r(3091),t)},5732:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(9575),o=r(1781),n=r(4556).DEBUG.extend("common:auth:logout");t.default=()=>{n(`Clearing the global user config for key:${i.ROOT_CONFIG_KEY.AUTH}`),o.setProjectConfigItem(i.ROOT_CONFIG_KEY.AUTH,void 0)}},9712:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessTokenForPKCE=void 0;const i=r(752),o=r(4705),n=r(7005),a=i.__importDefault(r(6634)),s=r(9246),l=r(6761),c=new o.CryptoProvider;t.getAccessTokenForPKCE=e=>i.__awaiter(void 0,void 0,void 0,(function*(){const{clientId:t,authority:r,baseUrl:i,account:d}=e,u=[`${i}/IDENTITY`,`${i}/user_impersonation`,"offline_access"],p=new o.PublicClientApplication({auth:{clientId:t,authority:r},cache:{cachePlugin:n.cachePlugin}}),m=d?JSON.parse(d):void 0;n.readFromCache(p.getTokenCache());let g=null;if(m)try{return g=yield p.acquireTokenSilent({account:m,scopes:u}),l.handleResponse(g)}catch(e){throw new Error("Failed to authenticate, please sign in again!")}const{verifier:h,challenge:f}=yield c.generatePkceCodes(),{app:_,server:S}=yield s.openServerAtPort(),v=`http://localhost:${S.address().port}/redirect`,y=yield p.getAuthCodeUrl({redirectUri:v,scopes:u,codeChallenge:f,codeChallengeMethod:"S256"});e.logger.info("Opening browser for authentication (if your browser is not opened please copy + paste this link):"),e.logger.log(y),yield a.default(y);try{const e=yield s.listenForAuthCode(_);if(g=yield p.acquireTokenByCode({redirectUri:v,scopes:u,code:e,codeVerifier:h}),g)return l.handleResponse(g);throw new Error("Failed to authenticate")}finally{S.close()}}))},7052:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CLICommand=void 0;const i=r(752),o=r(5719),n=i.__importDefault(r(4556)),a=r(1570);t.CLICommand=class{constructor(e,t,r){this.command=e,this.describe=t,this._args=r,this.commandBuilder=new a.CommandBuilderService,this.builder=this.builder.bind(this),this.handler=this.handler.bind(this)}get args(){return this._args}set args(e){this._args=e}builder(e){return this.commandBuilder.buildYargsOptions(e,this.command,this._args)}handler(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=this.commandBuilder.validateArgs(e,this._args);if(!e.interactive&&!t.valid)throw n.default.error(JSON.stringify(t.errors)),new Error("Invalid arguments");if(!t.valid){const r=this.commandBuilder.generatePromptsFromErrors(e,this._args,t.errors),i=yield o.promptQuestions(r);e=Object.assign(e,i);const n=this.commandBuilder.validateArgs(e,this._args);if(!n.valid)throw Object.keys(n.errors).map((e=>`Please provide value for argument ${e}. Example: --${e}=<value>\nError message: ${n.errors[e]}`)).join("\n")}return this.execute(e)}))}}},2778:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeCDFRCFile=t.injectRCFile=void 0;const i=r(752),o=r(7147),{stat:n,writeFile:a}=o.promises,s=r(1017),l=i.__importDefault(r(9950)),c=r(9575),d=r(9369),u=r(4556),p=r(1781),m=u.DEBUG.extend("common:config");t.injectRCFile=function(){return function(e,t,r){if(t===e.handler.name||t===e.execute.name){const e=r.value;r.value=function(...t){return i.__awaiter(this,void 0,void 0,(function*(){const r=t[0];(yield n(s.join(d.cwd(),c.CONSTANTS.PROJECT_CONFIG_FILE_NAME))).isFile()&&(r.solutionConfig=new g,e.apply(this,t))}))}}return r}},t.makeCDFRCFile=(e,t,r)=>i.__awaiter(void 0,void 0,void 0,(function*(){m("Fetching global app/login config");const i=p.getProjectConfig();if(!i)throw new Error("Failed to load global config");m("App/login config loaded %o",i);const{cluster:o,project:n}=i;m("Creating project config file"),yield a(s.join(d.cwd(),c.CONSTANTS.PROJECT_CONFIG_FILE_NAME),JSON.stringify({version:1,name:e,config:{backend:t,cluster:o,project:n,templateId:e,templateVersion:parseInt(r||"0")}},void 0,2))}));class g{constructor(){if(this.store=new l.default(c.CONSTANTS.PROJECT_CONFIG_FILE_NAME,{},{configPath:s.join(d.cwd(),c.CONSTANTS.PROJECT_CONFIG_FILE_NAME)}),0==Object.keys(this.store.all).length)throw new Error("Either config file is empty or invalid, please delete it and run the init command again");this.all=this.store.all}get(e){return this.store.get(e)}set(e,t){return this.store.set(e,t)}delete(e){return this.store.delete(e)}clear(){return this.store.clear()}}},8380:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.askUserForInputIfNeeded=void 0;const i=r(752),o=r(2411);t.askUserForInputIfNeeded=(e,t)=>i.__awaiter(void 0,void 0,void 0,(function*(){const r=t.filter((t=>void 0===e[t.name]||null===e[t.name]));return r.length>0?o.prompt(r):e}))},9575:(e,t)=>{var r,i,o,n;Object.defineProperty(t,"__esModule",{value:!0}),t.SETTINGS=t.SupportedGraphQLGeneratorPlugins=t.CONSTANTS=t.AUTH_CONFIG=t.ROOT_CONFIG_KEY=t.LOGIN_STATUS=t.AUTH_TYPE=void 0,(n=t.AUTH_TYPE||(t.AUTH_TYPE={})).PKCE="interactive",n.CLIENT_SECRET="clientSecret",n.APIKEY="legacy",n.DEVICE_CODE="deviceCode",(o=t.LOGIN_STATUS||(t.LOGIN_STATUS={})).SUCCESS="success",o.UNAUTHENTICATED="unauthenticated",(i=t.ROOT_CONFIG_KEY||(t.ROOT_CONFIG_KEY={})).AUTH="auth",i.TELEMETRY_DISABLED="telemetryDisabled",i.AUTO_CHECK_FOR_UPDATES="autoCheckForUpdates",i.UID="uid",(r=t.AUTH_CONFIG||(t.AUTH_CONFIG={})).MSAL_AUTH_CACHE="msalTokenCache",r.ACCOUNT_INFO="msalAccountInfo",r.AUTH_TYPE="authType",r.LOGIN_STATUS="loginStatus",r.CLIENT_ID="clientId",r.CLIENT_SECRET="clientSecret",r.TENANT="tenant",r.CLUSTER="cluster",r.PROJECT="project",r.API_KEY="apiKey",t.CONSTANTS={APP_ID:"cdf",PROJECT_CONFIG_FILE_NAME:"cdfrc.json",PROJECT_CONFIG_DEFAULT_SCHEMA_FILE_NAME:"schema.graphql",MANUAL_WEBSITE:"https://github.com/cognitedata/platypus",GRAPHQL_CODEGEN_PLUGINS_NAME:{TYPESCRIPT:"typescript",TYPESCRIPT_OPERATIONS:"typescript-operations",TYPESCRIPT_RESOLVERS:"typescript-resolvers",TYPESCRIPT_REACT_APOLLO:"typescript-react-apollo",TYPESCRIPT_APOLLO_ANGULAR:"typescript-apollo-angular"}},t.SupportedGraphQLGeneratorPlugins=[t.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT,t.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT_OPERATIONS,t.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT_RESOLVERS,t.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT_REACT_APOLLO,t.CONSTANTS.GRAPHQL_CODEGEN_PLUGINS_NAME.TYPESCRIPT_APOLLO_ANGULAR],t.SETTINGS={TIMEOUT:1e4}},177:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultClientIdForPKCE=t.authenticate=void 0;const i=r(752),o=r(3737),n=r(1781),a=r(9575),s=r(8085),l=r(6751),c=i.__importDefault(r(5732)),d=i.__importStar(r(4556)),u=d.DEBUG.extend("middleware:auth");t.authenticate=function(e){return i.__awaiter(this,void 0,void 0,(function*(){try{if(l.skipMiddleware(e))return;"login"===s.getCommandName(e)&&(d.default.info("Logging out the current user and clearing the config (if exists)"),c.default(),e.authType!==a.AUTH_TYPE.PKCE&&e.authType!==a.AUTH_TYPE.DEVICE_CODE||e.clientId||(e.clientId=t.getDefaultClientIdForPKCE(e.cluster)));const r=n.getProjectConfig(),i=Object.assign(Object.assign({},r),e);let p=o.getCogniteSDKClient();if(p||(p=o.createSdkClient(i)),u("Fetching auth token from CDF..."),void 0===(yield p.authenticate()))throw u("Unable to fetch token from CDF (came back undefined"),new Error("Failed to authenticate against CDF.");u("Finished fetching auth token from CDF"),n.setProjectConfig({[a.AUTH_CONFIG.LOGIN_STATUS]:a.LOGIN_STATUS.SUCCESS,[a.AUTH_CONFIG.CLIENT_SECRET]:i.clientSecret,[a.AUTH_CONFIG.CLIENT_ID]:i.clientId,[a.AUTH_CONFIG.CLUSTER]:i.cluster,[a.AUTH_CONFIG.TENANT]:i.tenant,[a.AUTH_CONFIG.PROJECT]:i.project,[a.AUTH_CONFIG.AUTH_TYPE]:i.authType,[a.AUTH_CONFIG.API_KEY]:i.apiKey}),o.setCogniteSDKClient(p)}catch(e){throw n.setProjectConfigItem(a.ROOT_CONFIG_KEY.AUTH,void 0),new Error("Failed to authenticate you, please make sure you use correct credentials for the login")}}))},t.getDefaultClientIdForPKCE=e=>{switch(e){case"greenfield":return"4770c0f1-7bb6-43b5-8c37-94f2a9306757";case"bluefield":return"a7869455-32f2-4a07-b568-8485b9b887f0";case"api":case"europe-west1-1":return"6890be09-b7c9-4500-b020-c3cb762d14cc"}}},5789:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const i=r(752),o=i.__importDefault(r(2643)),n=r(1781),a=r(9575),s=r(4556),l=r(6974),c=r(8929),d=r(8085),u=r(8914);t.init=function(e){var t;return i.__awaiter(this,void 0,void 0,(function*(){const r=n.getConfig();r.get(a.ROOT_CONFIG_KEY.AUTO_CHECK_FOR_UPDATES)&&o.default({shouldNotifyInNpmScript:!0,distTag:"alpha",pkg:u}).notify({message:"There is a newer version of {packageName} is available.\nTo update run `{updateCommand}`\nTo skip check https://github.com/cognitedata/platypus/blob/master/apps/platypus-cdf-cli/README.md#update-notifier"}),e.verbose&&l.enable(`${a.CONSTANTS.APP_ID}*`);const i=r.get(a.ROOT_CONFIG_KEY.AUTH);e.logger=new s.Log,!1===r.get(a.ROOT_CONFIG_KEY.TELEMETRY_DISABLED)&&(e.mixpanel=c.getMixpanel(),null===(t=e.mixpanel)||void 0===t||t.track(d.getCompleteCommandString(e),{project:null==i?void 0:i.project,cluster:null==i?void 0:i.cluster})),e.apiKey&&(e.authType=a.AUTH_TYPE.APIKEY,e["auth-type"]=a.AUTH_TYPE.APIKEY),e.clientSecret&&(e.authType=a.AUTH_TYPE.CLIENT_SECRET,e["auth-type"]=a.AUTH_TYPE.CLIENT_SECRET)}))}},6751:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.skipMiddleware=void 0;const i=r(8085);t.skipMiddleware=e=>!!["logout"].includes(i.getCommandName(e).toString())},3985:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandBuilderService=void 0;const i=r(2308),o=r(5540),n=r(4487),a=r(2582);class s{constructor(){this.yargsBuilder=new a.YargsCommandBuilder,this.enquirerBuilder=new n.EnquirerCommandBuilder}buildYargsOptions(e,t,r){return this.yargsBuilder.buildOptions(e,t,r)}validateArgs(e,t){const r=new i.Validator(e);return t.forEach((e=>{if(e.required)switch(e.type){case o.CommandArgumentType.NUMBER:{r.addRule(e.name,new i.RequiredFieldValidator({validationMessage:e.prompt}));const t=e.options,o={min:t.min};t.max&&(o.max=t.max),r.addRule(e.name,new i.NumericFieldValidator({validationMessage:e.prompt,options:o}));break}default:case o.CommandArgumentType.STRING:r.addRule(e.name,new i.RequiredFieldValidator({validationMessage:e.prompt}))}})),r.validate()}generatePromptsFromErrors(e,t,r){return this.enquirerBuilder.build(e,t,r)}}t.CommandBuilderService=s,t.default=new s},4487:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EnquirerCommandBuilder=void 0;const i=r(5540),o=r(5719);t.EnquirerCommandBuilder=class{build(e,t,r){const n=[];o.setAnswers(e);for(const e in r){const r=t.find((t=>t.name===e));switch(r.type){case i.CommandArgumentType.BOOLEAN:n.push(o.showConfirm(r));break;case i.CommandArgumentType.DECIMAL:case i.CommandArgumentType.NUMBER:n.push(o.showNumeric(r));break;case i.CommandArgumentType.SELECT:n.push(o.showSelect(r));break;case i.CommandArgumentType.MULTI_SELECT:n.push(o.showMultiSelect(r));break;case i.CommandArgumentType.AUTOCOMPLETE:n.push(o.showAutocomplete(r));break;case i.CommandArgumentType.STRING:default:n.push(o.showInput(r))}}return n}}},821:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(752).__exportStar(r(3985),t)},2582:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.YargsCommandBuilder=void 0;const i=r(5540);t.YargsCommandBuilder=class{buildOptions(e,t,r){const i=e;return r.forEach((e=>this.buildYargOption(i,e))),i}buildYargOption(e,t){switch(e=e.option(t.name,this.buildYargsArgumentOptions(t)),t.example&&(e=e.example(t.example,"")),t.type){case i.CommandArgumentType.MULTI_SELECT:e.array(t.name).choices(t.name,t.options.choices);break;case i.CommandArgumentType.SELECT:e.string(t.name).choices(t.name,t.options.choices);break;case i.CommandArgumentType.BOOLEAN:e.boolean(t.name);break;case i.CommandArgumentType.NUMBER:e.number(t.name);break;case i.CommandArgumentType.AUTOCOMPLETE:case i.CommandArgumentType.STRING:e.string(t.name)}return e}buildYargsArgumentOptions(e){const t={description:e.description};return e.initial&&(t.default=e.initial),e.alias&&(t.alias=e.alias),t}}},1570:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(752).__exportStar(r(821),t)},5540:(e,t,r)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CommandArgumentType=void 0,r(9575),(i=t.CommandArgumentType||(t.CommandArgumentType={})).STRING="string",i.NUMBER="number",i.DECIMAL="decimal",i.BOOLEAN="boolean",i.SELECT="select",i.AUTOCOMPLETE="autocomplete",i.MULTI_SELECT="multi_select"},9695:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getAuthToken=void 0;const i=r(752),o=r(4764),n=r(9575),a=r(4556);t.getAuthToken=e=>()=>i.__awaiter(void 0,void 0,void 0,(function*(){const t=`https://login.microsoftonline.com/${e.tenant}`,r=e.clientId,i=`https://${e.cluster}.cognitedata.com`;switch(e.authType){case n.AUTH_TYPE.APIKEY:return a.DEBUG("Getting token via APIKEY"),e.apiKey;case n.AUTH_TYPE.PKCE:a.DEBUG("Getting token via PKCE");try{return(yield o.getAccessTokenForPKCE({authority:t,clientId:r,baseUrl:i,account:e[n.AUTH_CONFIG.ACCOUNT_INFO],logger:e.logger})).accessToken}catch(e){throw a.DEBUG("Failed to get token via PKCE"),new Error("Unable to refresh token based on your login, you need to retrigger login once again")}case n.AUTH_TYPE.CLIENT_SECRET:{a.DEBUG("Getting token via Client Secret");const n=(yield o.getAccessTokenForClientSecret({authority:t,clientId:r,baseUrl:i,clientSecret:e.clientSecret,logger:e.logger})).accessToken;if(n)return n;throw a.DEBUG("Failed to get token via Client Secret"),new Error("Unable to refresh token based on your login, you need to retrigger login once again")}case n.AUTH_TYPE.DEVICE_CODE:a.DEBUG("Getting token via Device Code");try{return(yield o.getAccessTokenForDeviceCode({authority:t,clientId:r,baseUrl:i,account:e[n.AUTH_CONFIG.ACCOUNT_INFO],logger:e.logger})).accessToken}catch(e){throw a.DEBUG("Failed to get token via Device Code"),new Error("Unable to refresh token based on your login, you need to retrigger login once again")}default:throw new Error("Unsupported auth type")}}))},3737:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSdkClient=t.setCogniteSDKClient=t.getCogniteSDKClient=void 0;const i=r(7589),o=r(9695),n=r(9575);let a;t.getCogniteSDKClient=()=>a,t.setCogniteSDKClient=e=>{a=e},t.createSdkClient=e=>{const{cluster:r,authType:a,project:s}=e,l=`https://${r}.cognitedata.com`,c=n.CONSTANTS.APP_ID,d=new i.CogniteClient({appId:c,project:s,baseUrl:a===n.AUTH_TYPE.APIKEY?"":l,apiKeyMode:a===n.AUTH_TYPE.APIKEY,getToken:o.getAuthToken(e)});return t.setCogniteSDKClient(d),d}},1781:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setProjectConfigItem=t.setProjectConfig=t.getProjectConfig=t.getConfig=void 0;const i=r(752).__importDefault(r(9242)),o=r(5828),n=r(9575);let a;t.getConfig=()=>(a||(a=new i.default({projectName:n.CONSTANTS.APP_ID,configName:"cdf-credentials",defaults:{[n.ROOT_CONFIG_KEY.TELEMETRY_DISABLED]:!1,[n.ROOT_CONFIG_KEY.UID]:o.v4(),[n.ROOT_CONFIG_KEY.AUTO_CHECK_FOR_UPDATES]:!0}})),a),t.getProjectConfig=()=>a.get(n.ROOT_CONFIG_KEY.AUTH,void 0),t.setProjectConfig=e=>{t.setProjectConfigItem(n.ROOT_CONFIG_KEY.AUTH,Object.assign(Object.assign({},t.getProjectConfig()),e))},t.setProjectConfigItem=(e,t)=>{if(!t)return a.delete(e);a.set(e,t)}},5719:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.promptQuestions=t.showAutocomplete=t.showMultiSelect=t.showSelect=t.showConfirm=t.showNumeric=t.showInput=t.setAnswers=void 0;const i=r(752).__importDefault(r(2411));let o={};const n=new i.default({},o),a=e=>{const t={type:"input",name:e.name,message:e.prompt};return e.required&&(t.required=!0),e.initial&&(t.initial=e.initial),e.skip&&(t.skip=e.skip),t};t.setAnswers=e=>{o=Object.assign({},e),n.answers=o},t.showInput=e=>a(e),t.showNumeric=e=>Object.assign(a(e),e.options,{type:"numeral"}),t.showConfirm=e=>Object.assign(a(e),{type:"confirm"}),t.showSelect=e=>{const t=e.options;return Object.assign(a(e),{type:"select",choices:t.choices,muliple:!1,sort:t.sort||!0})},t.showMultiSelect=e=>{const t=e.options;return Object.assign(a(e),{type:"multiselect",choices:t.choices,muliple:!0,sort:t.sort||!0})},t.showAutocomplete=e=>{const t=e.options;return Object.assign(a(e),{type:"autocomplete",choices:t.choices,muliple:!1,sort:t.sort||!0,suggest:(e,t)=>{const r=e.toLowerCase(),i=t.filter((e=>!e._userInput)).filter((e=>e.message.toLowerCase().includes(r)));return i.length||i.push({name:e,message:e,value:e,_userInput:!0}),i}})},t.promptQuestions=function(e){return n.prompt(e)}},2477:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.promiseWithTimeout=void 0;const i=r(752);t.promiseWithTimeout=(e,t,r)=>i.__awaiter(void 0,void 0,void 0,(function*(){let i;const o=new Promise(((t,o)=>{i=setTimeout((()=>o(new Error(r))),e)}));return Promise.race([t(),o]).then((e=>(clearTimeout(i),e)))}))},4556:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Log=t.DEBUG=void 0;const i=r(752),o=r(2308),n=i.__importDefault(r(5022)),a=i.__importDefault(r(6974)),s=r(9575);t.DEBUG=a.default(s.CONSTANTS.APP_ID);class l extends o.Logger{debug(e,...r){t.DEBUG(e)}success(e,...t){console.info(n.default.green(e))}info(e,...t){console.info(n.default.blueBright(e))}warn(e,...t){console.log(n.default.yellow(e))}error(e,...t){console.error(n.default.red(e))}fatal(e,...t){this.error(e,t)}log(e,...t){console.log(n.default.cyan(e))}}t.Log=l,t.default=new l},8929:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getMixpanel=void 0;const i=r(1781),o=r(8941),n=r(9575);t.getMixpanel=()=>{const e=i.getConfig(),t=e.get(n.ROOT_CONFIG_KEY.AUTH),r=o.init("c1cbbc01f5a5c2384f646acae64716f2");return r.people.set(e.get(n.ROOT_CONFIG_KEY.UID),{project:null==t?void 0:t.project,cluster:null==t?void 0:t.cluster}),r}},9246:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listenForAuthCode=t.openServerAtPort=void 0;const i=r(752),o=i.__importDefault(r(6860)),n=r(4556);t.openServerAtPort=()=>i.__awaiter(void 0,void 0,void 0,(function*(){return new Promise((e=>{const t=o.default(),r=t.listen(0,"0.0.0.0",(()=>{e({app:t,server:r})}))}))})),t.listenForAuthCode=e=>i.__awaiter(void 0,void 0,void 0,(function*(){return new Promise(((t,r)=>{e.get("/redirect",((e,i)=>{if(e.query.error)return i.end(`Something went wrong: ${e.query.error}, description: ${e.query.error_description}`),r(e.query.error);const o=e.query.code;if(o)return i.end("You have authenticated successfully! Feel free to close this window."),t(o);n.DEBUG("HTTP_RESPONSE %o",e.query),i.end(`Well thats embarrassing, neither we got an auth code or any error ${JSON.stringify(e.query)}`),r("No auth code or error")}))}))}))},7005:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cachePlugin=t.readFromCache=void 0;const i=r(752),o=r(9575),n=r(1781);t.readFromCache=e=>i.__awaiter(void 0,void 0,void 0,(function*(){const t=n.getProjectConfig(),r=t?t[o.AUTH_CONFIG.MSAL_AUTH_CACHE]:void 0;r&&e.deserialize(r)})),t.cachePlugin={beforeCacheAccess:e=>i.__awaiter(void 0,void 0,void 0,(function*(){yield t.readFromCache(e.tokenCache)})),afterCacheAccess:e=>i.__awaiter(void 0,void 0,void 0,(function*(){e.cacheHasChanged&&n.setProjectConfig({[o.AUTH_CONFIG.MSAL_AUTH_CACHE]:e.tokenCache.serialize()})}))}},8085:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCompleteCommandString=t.getCommandName=void 0,t.getCommandName=e=>e._[0],t.getCompleteCommandString=e=>e._.join(" ")},2308:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(752);i.__exportStar(r(3332),t),i.__exportStar(r(1141),t),i.__exportStar(r(7476),t),i.__exportStar(r(8968),t),i.__exportStar(r(3099),t),i.__exportStar(r(5036),t),i.__exportStar(r(6026),t),i.__exportStar(r(8161),t),i.__exportStar(r(7170),t),i.__exportStar(r(3967),t),i.__exportStar(r(6486),t)},2561:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=void 0,t.EventDispatcher=class{}},9918:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Hooks=void 0,t.Hooks=class{}},3332:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Hooks=t.EventDispatcher=void 0;const i=r(752);var o=r(2561);Object.defineProperty(t,"EventDispatcher",{enumerable:!0,get:function(){return o.EventDispatcher}});var n=r(9918);Object.defineProperty(t,"Hooks",{enumerable:!0,get:function(){return n.Hooks}}),i.__exportStar(r(9150),t)},9150:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},1141:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.LogPublisher=t.LogLevel=t.LogEntry=void 0;var i=r(9500);Object.defineProperty(t,"LogEntry",{enumerable:!0,get:function(){return i.LogEntry}});var o=r(8135);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return o.LogLevel}});var n=r(7504);Object.defineProperty(t,"LogPublisher",{enumerable:!0,get:function(){return n.LogPublisher}});var a=r(7620);Object.defineProperty(t,"Logger",{enumerable:!0,get:function(){return a.Logger}})},9500:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LogEntry=void 0;const i=r(8135);t.LogEntry=class{constructor(){this.entryDate=new Date,this.message="",this.level=i.LogLevel.Debug,this.extraInfo=[],this.logWithDate=!0}buildLogString(){const e=[];return this.logWithDate&&e.push(new Date),e.push(`Type: ${i.LogLevel[this.level]}`),e.push(`Message: ${this.message}`),this.extraInfo.length&&e.push(`Extra Info: ${this.formatParams(this.extraInfo)}`),e.join("\n")}formatParams(e){let t=e.join(",");if(e.some((e=>"object"==typeof e))){t="";for(const r of e)t+=JSON.stringify(r)+","}return t}}},8135:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,(r=t.LogLevel||(t.LogLevel={}))[r.All=0]="All",r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal",r[r.Off=6]="Off"},7504:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LogPublisher=void 0,t.LogPublisher=class{}},7620:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0,t.Logger=class{}},7476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.STORAGE_PROVIDER_CONSTANTS=t.StorageProviderType=t.StorageProviderFactory=t.StorageProvider=void 0;var i=r(4840);Object.defineProperty(t,"StorageProvider",{enumerable:!0,get:function(){return i.StorageProvider}});var o=r(8756);Object.defineProperty(t,"StorageProviderFactory",{enumerable:!0,get:function(){return o.StorageProviderFactory}});var n=r(6081);Object.defineProperty(t,"StorageProviderType",{enumerable:!0,get:function(){return n.StorageProviderType}});var a=r(7264);Object.defineProperty(t,"STORAGE_PROVIDER_CONSTANTS",{enumerable:!0,get:function(){return a.STORAGE_PROVIDER_CONSTANTS}})},8756:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StorageProviderFactory=void 0,t.StorageProviderFactory=class{}},6081:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StorageProviderType=void 0,(r=t.StorageProviderType||(t.StorageProviderType={})).localStorage="localStorage",r.sessionStorage="sessionStorage",r.inMemoryStorage="inMemoryStorage"},7264:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.STORAGE_PROVIDER_CONSTANTS=void 0;const i=r(6081);t.STORAGE_PROVIDER_CONSTANTS={PREFIX:"ls",DEFAULT_PROVIDER:i.StorageProviderType.localStorage}},4840:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StorageProvider=void 0,t.StorageProvider=class{}},5888:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionType=void 0,(t.EncryptionType||(t.EncryptionType={})).base64="Base64"},6841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Encryption=void 0,t.Encryption=class{}},8968:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionType=t.Encryption=void 0;var i=r(6841);Object.defineProperty(t,"Encryption",{enumerable:!0,get:function(){return i.Encryption}});var o=r(5888);Object.defineProperty(t,"EncryptionType",{enumerable:!0,get:function(){return o.EncryptionType}})},5745:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DateFormat=void 0,(r=t.DateFormat||(t.DateFormat={})).SERVER_DATE_FORMAT="yyyy-MM-dd",r.DISPLAY_DATE_FORMAT="dd.MM.yyyy",r.DISPLAY_DATETIME_FORMAT="dd.MM.yyyy HH:mm"},979:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Days=void 0,(r=t.Days||(t.Days={}))[r.Mon=0]="Mon",r[r.Tue=1]="Tue",r[r.Wed=2]="Wed",r[r.Thu=3]="Thu",r[r.Fri=4]="Fri",r[r.Sat=5]="Sat",r[r.Sun=6]="Sun"},4593:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},3099:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(752);i.__exportStar(r(5745),t),i.__exportStar(r(979),t),i.__exportStar(r(4593),t),i.__exportStar(r(8761),t),i.__exportStar(r(7070),t),i.__exportStar(r(7487),t),i.__exportStar(r(8578),t)},8761:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8578:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlatypusError=void 0;class r{constructor(e,t,r,i){this.message=e,this.type=t,r&&(this.code=r),i&&(this.stack=i)}static fromSdkError(e){const t=new r(e.message,"UNKNOWN",e.status,e.stack),i=e.errors&&1===e.errors.length?e.errors[0].errorMessage?e.errors[0].errorMessage:e.errors[0].message:e.message;switch(e.status){case 400:if(e.errorMessage&&e.errorMessage.includes("breaking changes")){t.message=e.errorMessage,t.type="BREAKING_CHANGE";break}if(e.missing){t.message=i,t.type="NOT_FOUND";break}t.message=e.errorMessage?e.errorMessage:i,t.type="VALIDATION";break;case 401:t.message=i,t.type="NOT_AUTHENTICATED";break;case 403:t.message=i,t.type="NOT_AUTHORIZED";break;case 404:t.message=i,t.type="NOT_FOUND";break;case 409:t.message=i,t.type="VALIDATION";break;case 500:t.message=i,t.type="SERVER_ERROR";break;default:t.message=e.message,t.type="UNKNOWN"}return t}toString(){return this.message}}t.PlatypusError=r},7070:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Result=void 0;class r{constructor(e,t,r){if(e&&t)throw new Error("InvalidOperation: A result cannot be successful and contain an error");if(!e&&!t)throw new Error("InvalidOperation: A failing result needs to contain an error message");this.isSuccess=e,this.isFailure=!e,this.error=t,this._value=r,Object.freeze(this)}static ok(e){return new r(!0,null,e)}static fail(e){return new r(!1,e)}getValue(){if(!this.isSuccess)throw console.log(this.error),new Error("Can't get the value of an error result. Use 'errorValue' instead.");return this._value}errorValue(){return this.error}}t.Result=r},7487:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TimeFormat=void 0,(r=t.TimeFormat||(t.TimeFormat={})).TWELVE_HOUR_TIME_FORMAT="hh:mm A",r.MILITARY_TIME_FORMAT="HH:mm"},4946:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataUtils=void 0,t.DataUtils=class{static isString(e){return"[object String]"===Object.prototype.toString.call(e)}static isNumber(e){return!isNaN(e)&&!isNaN(parseFloat(e))}static isArray(e){return Array.isArray(e)}}},6128:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DateUtils=void 0,t.DateUtils=class{}},6026:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DateUtils=t.DataUtils=t.TimeUtils=void 0;var i=r(3146);Object.defineProperty(t,"TimeUtils",{enumerable:!0,get:function(){return i.TimeUtils}});var o=r(4946);Object.defineProperty(t,"DataUtils",{enumerable:!0,get:function(){return o.DataUtils}});var n=r(6128);Object.defineProperty(t,"DateUtils",{enumerable:!0,get:function(){return n.DateUtils}})},3146:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeUtils=void 0,t.TimeUtils=class{}},5036:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Validator=t.ValidationRule=void 0;const i=r(752);var o=r(638);Object.defineProperty(t,"ValidationRule",{enumerable:!0,get:function(){return o.ValidationRule}});var n=r(5183);Object.defineProperty(t,"Validator",{enumerable:!0,get:function(){return n.Validator}}),i.__exportStar(r(8881),t)},8881:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},638:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationRule=void 0,t.ValidationRule=class{constructor(e){this.validationMessage=(null==e?void 0:e.validationMessage)||"",this.options=(null==e?void 0:e.options)||{}}}},5183:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Validator=void 0,t.Validator=class{constructor(e){this.data=e,this.validators={}}setData(e){this.data=e}addRule(e,t){this.validators.hasOwnProperty(e)||(this.validators[e]=[]),this.validators[e].push(t)}validate(){const e={errors:{},valid:!0};for(const t in this.validators)this.validators[t]&&this.validators[t].forEach((r=>{if(!this.data.hasOwnProperty(t))return e.errors=Object.assign(e.errors,{[t]:r.validationMessage||"Data does not contain "+t+" property"}),void(e.valid=!1);const i=r.validate(t,this.data[t]);i.valid||(e.errors=Object.assign(e.errors,i.errors),e.valid=!1)}));return e}clearRules(){this.validators={}}}},7170:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(752);i.__exportStar(r(9842),t),i.__exportStar(r(8494),t)},8494:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NumericFieldValidator=void 0;const i=r(6026),o=r(5036);class n extends o.ValidationRule{constructor(e){super(e)}validate(e,t){return i.DataUtils.isNumber(t)?this.options.min&&t<this.options.min?{valid:!1,errors:{[e]:`${e} should not be less than ${this.options.min}`}}:this.options.max&&t>this.options.max?{valid:!1,errors:{[e]:`${e} should not be bigger than ${this.options.max}`}}:{valid:!0,errors:{}}:{valid:!1,errors:{[e]:e+" is not a number"}}}}t.NumericFieldValidator=n},9842:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredFieldValidator=void 0;const i=r(6026),o=r(5036);class n extends o.ValidationRule{validate(e,t){return!1!==t&&0!==t&&(!t||Array.isArray(t)&&!t.length||i.DataUtils.isString(t)&&!t.trim())?{valid:!1,errors:{[e]:this.validationMessage||e+" is required field"}}:{valid:!0,errors:{}}}}t.RequiredFieldValidator=n},8015:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8161:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(752);i.__exportStar(r(6236),t),i.__exportStar(r(5776),t),i.__exportStar(r(749),t),i.__exportStar(r(3967),t),i.__exportStar(r(5287),t),i.__exportStar(r(8015),t),i.__exportStar(r(3809),t)},8492:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionDataMapper=void 0,t.SolutionDataMapper=class{serialize(e){return{externalId:e.id,name:e.id,description:e.description,createdTime:e.createdTime}}deserialize(e){var t;return{id:e.externalId,name:e.name,description:e.description,createdTime:e.createdTime,updatedTime:e.createdTime,owners:[],version:(null===(t=e.versions)||void 0===t?void 0:t.length)?e.versions[0].version.toString():""}}}},6072:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionSchemaVersionDataMapper=void 0;const i=r(5287);t.SolutionSchemaVersionDataMapper=class{serialize(e,t){return{createdTime:+t.schema,dataModel:{graphqlRepresentation:t.schema},version:+t.version}}deserialize(e,t){return{externalId:e,status:i.SolutionSchemaStatus.PUBLISHED,version:t.version.toString(),createdTime:+t.createdTime,lastUpdatedTime:+t.createdTime,schema:t.dataModel.graphqlRepresentation}}}},3967:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(752);i.__exportStar(r(8673),t),i.__exportStar(r(7810),t)},7810:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionMixerApiFacadeService=void 0;const i=r(8492),o=r(3099),n=r(6072);t.SolutionMixerApiFacadeService=class{constructor(e){this.solutionsApiService=e,this.solutionDataMapper=new i.SolutionDataMapper,this.apiSpecVersionMapper=new n.SolutionSchemaVersionDataMapper}createSolution(e){return this.solutionsApiService.upsertApi({externalId:e.name,description:e.description||"",name:e.name,metadata:e.metadata||{}}).then((e=>this.solutionDataMapper.deserialize(e)))}deleteSolution(e){throw new Error("Method not implemented.")}listSolutions(){return this.solutionsApiService.listApis().then((e=>e.map((e=>this.solutionDataMapper.deserialize(e)))))}fetchSolution(e){return this.solutionsApiService.getApisByIds(e.solutionId,!1).then((t=>!t||!t.length||t.length>1?Promise.reject(new o.PlatypusError(`Specified version ${e.solutionId} does not exist!`,"NOT_FOUND")):this.solutionDataMapper.deserialize(t[0])))}fetchSchemaVersion(e){return this.listSchemaVersions(e).then((t=>t.find((t=>t.version.toString()===e.version.toString()))))}listSchemaVersions(e){return this.solutionsApiService.getApisByIds(e.solutionId,!0).then((t=>!t||!t.length||t.length>1?Promise.reject(new o.PlatypusError(`Specified version ${e.solutionId} does not exist!`,"NOT_FOUND")):t[0].versions.map((t=>this.apiSpecVersionMapper.deserialize(e.solutionId,t)))))}publishSchema(e){return this.solutionsApiService.publishVersion({apiExternalId:e.solutionId,graphQl:e.schema,bindings:e.bindings,version:e.version?+e.version:void 0}).then((t=>this.apiSpecVersionMapper.deserialize(e.solutionId,t)))}updateSchema(e){return this.solutionsApiService.updateVersion({apiExternalId:e.solutionId,graphQl:e.schema,bindings:e.bindings,version:e.version?+e.version:void 0}).then((t=>this.apiSpecVersionMapper.deserialize(e.solutionId,t)))}runQuery(e){const t=Object.assign(Object.assign({},e),{extras:Object.assign(Object.assign({},e.extras),{apiName:e.solutionId})});return this.solutionsApiService.runQuery(t).then((e=>e)).catch((e=>Promise.reject(o.PlatypusError.fromSdkError(e))))}}},8673:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionsApiService=void 0;const i=r(752),o=r(3099);t.SolutionsApiService=class{constructor(e){this.cdfClient=e,this.schemaServiceBaseUrl=`/api/v1/projects/${this.cdfClient.project}/schema/graphql`}getApisByIds(e,t=!0){const r={query:`\n    query {\n      getApisByIds(externalIds: ["${e}"] ) {\n        externalId\n        name\n        description\n        createdTime\n        ${t?"\n    versions {\n      version\n      createdTime\n      dataModel {\n        graphqlRepresentation\n      }\n    }":""}\n      }\n    }\n    `};return this.runGraphQlQuery(this.schemaServiceBaseUrl,r).then((e=>e.data.data.getApisByIds)).catch((e=>Promise.reject(o.PlatypusError.fromSdkError(e))))}listApis(){return this.runGraphQlQuery(this.schemaServiceBaseUrl,{query:"\n    query {\n      listApis {\n        edges {\n          node {\n            externalId\n            name\n            description\n            createdTime\n          }\n        }\n      }\n    }\n    "}).then((e=>this.transformData(e,"listApis"))).catch((e=>Promise.reject(o.PlatypusError.fromSdkError(e))))}upsertApi(e){const t={query:"\n        mutation createUpdateApi($apiCreate: ApiCreate!) {\n          upsertApis(apis: [$apiCreate]) {\n            externalId\n            versions {\n              version\n              dataModel {\n                graphqlRepresentation\n              }\n            }\n          }\n        }\n      ",variables:{apiCreate:{externalId:e.externalId,name:e.name?e.name:e.externalId,description:e.description}}};return this.runGraphQlQuery(this.schemaServiceBaseUrl,t).then((e=>e.data.data.upsertApis[0])).catch((e=>Promise.reject(o.PlatypusError.fromSdkError(e))))}publishVersion(e){return this.upsertApiVersion(e,"NEW_VERSION")}updateVersion(e){return this.upsertApiVersion(e,"PATCH")}listStorage(){return this.runStorageApiRequest("definitions/list",{includeInheritedProperties:!0}).then((e=>e.items))}listStorageInstances(e){return this.runStorageApiRequest("instances/list",e).then((e=>e.items))}upsertStorage(e){return this.runStorageApiRequest("definitions/apply",e).then((e=>e.items))}ingestInstancesIntoStorage(e){return this.runStorageApiRequest("instances/ingest",{items:e}).then((e=>e.items))}upsertApiVersion(e,t){const r={apiExternalId:e.apiExternalId,graphQl:e.graphQl,bindings:e.bindings?e.bindings:[]};e.version&&(r.version=+e.version);const i={query:"\n      mutation upsertApiVersion($apiVersion: ApiVersionFromGraphQl!) {\n        upsertApiVersionFromGraphQl(\n          apiVersion: $apiVersion\n        ) {\n          version\n          createdTime\n          dataModel {\n            graphqlRepresentation\n          }\n        }\n      }\n      ",variables:{apiVersion:r,conflictMode:t}};return this.runGraphQlQuery(this.schemaServiceBaseUrl,i).then((e=>e.data.data.upsertApiVersionFromGraphQl)).catch((e=>Promise.reject(o.PlatypusError.fromSdkError(e))))}runQuery(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=`/api/v1/projects/${this.cdfClient.project}/schema/api/${e.solutionId}/${e.schemaVersion}/graphql`;return(yield this.runGraphQlQuery(t,e.graphQlParams)).data}))}runStorageApiRequest(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const r=`/api/v1/projects/${this.cdfClient.project}/datamodelstorage/${e}`;return new Promise(((e,i)=>{this.cdfClient.post(r,{data:t,headers:{"cdf-version":"alpha"}}).then((t=>{t.data.errors?i({status:400,errors:[...t.data.errors]}):e(t.data)})).catch((e=>{console.error(e),i({status:400,errors:[]})}))}))}))}runGraphQlQuery(e,t){return new Promise(((r,i)=>{this.cdfClient.post(e,{data:t}).then((e=>{e.data.errors?i({status:400,errors:[...e.data.errors]}):r(e)}))}))}transformData(e,t){return e.data.data[t].edges.map((e=>e.node))}}},749:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=r(752);i.__exportStar(r(8190),t),i.__exportStar(r(9034),t),i.__exportStar(r(2295),t),i.__exportStar(r(8308),t)},8190:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionTemplatesFacadeService=void 0;const i=r(2295),o=r(8308);t.SolutionTemplatesFacadeService=class{constructor(e){this.templatesApiService=e,this.templatesDataMapper=new o.TemplatesDataMapper,this.templateSchemaDataMapper=new i.TemplateSchemaDataMapper}createSolution(e){return this.templatesApiService.createTemplateGroup(e).then((e=>this.templatesDataMapper.deserialize(e)))}deleteSolution(e){return this.templatesApiService.deleteTemplateGroup(e)}listSolutions(){return this.templatesApiService.listTemplateGroups().then((e=>e.map((e=>this.templatesDataMapper.deserialize(e)))))}fetchSolution(e){return this.templatesApiService.fetchTemplateGroup({solutionId:e.solutionId}).then((e=>this.templatesDataMapper.deserialize(e)))}fetchSchemaVersion(e){return this.templatesApiService.fetchSchemaVersion(e).then((t=>this.templateSchemaDataMapper.deserialize(e.solutionId,t)))}listSchemaVersions(e){return this.templatesApiService.listSchemaVersions(e).then((t=>t.map((t=>this.templateSchemaDataMapper.deserialize(e.solutionId,t)))))}publishSchema(e){return this.templatesApiService.publishSchema(e).then((t=>this.templateSchemaDataMapper.deserialize(e.solutionId,t)))}updateSchema(e){return this.templatesApiService.updateSchema(e).then((t=>this.templateSchemaDataMapper.deserialize(e.solutionId,t)))}runQuery(e){return this.templatesApiService.runQuery({graphQlParams:e.graphQlParams,solutionId:e.solutionId,schemaVersion:e.schemaVersion})}}},2295:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateSchemaDataMapper=void 0;const i=r(5287);t.TemplateSchemaDataMapper=class{serialize(e,t){return{createdTime:+t.schema,lastUpdatedTime:+t.lastUpdatedTime,schema:t.schema,version:+t.version}}deserialize(e,t){return{externalId:e,status:i.SolutionSchemaStatus.PUBLISHED,version:t.version.toString(),createdTime:+t.createdTime,lastUpdatedTime:+t.lastUpdatedTime,schema:t.schema}}}},9034:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemplatesApiService=t.TEMPLATE_GROUP_LIST_LIMIT=void 0;const i=r(7669),o=r(3099);t.TEMPLATE_GROUP_LIST_LIMIT=1e3,t.TemplatesApiService=class{constructor(e){this.cdfClient=e}createTemplateGroup(e){const t=[{externalId:e.name,description:e.description||"",owners:e.owner?[e.owner]:[]}];return this.cdfClient.templates.groups.create(t).then((e=>{const[t]=e;return t})).catch((e=>Promise.reject(o.PlatypusError.fromSdkError(e))))}deleteTemplateGroup(e){return this.cdfClient.templates.groups.delete([{externalId:e.id}],{ignoreUnknownIds:!1}).catch((e=>Promise.reject(o.PlatypusError.fromSdkError(e))))}listTemplateGroups(){return this.cdfClient.templates.groups.list({limit:t.TEMPLATE_GROUP_LIST_LIMIT}).then((e=>e.items)).catch((e=>Promise.reject(o.PlatypusError.fromSdkError(e))))}fetchTemplateGroup(e){const t=[{externalId:e.solutionId}];return this.cdfClient.templates.groups.retrieve(t).then((e=>e[0])).catch((e=>Promise.reject(o.PlatypusError.fromSdkError(e))))}fetchSchemaVersion(e){return this.listSchemaVersions(e).then((t=>t&&t.length?t[0]:Promise.reject(new o.PlatypusError(`Specified version ${e.version} does not exist!`,"NOT_FOUND"))))}listSchemaVersions(e){const t=e.version?{filter:{minVersion:+e.version,maxVersion:+e.version}}:{};return this.cdfClient.templates.group(e.solutionId).versions.list(t).then((e=>e.items)).catch((e=>Promise.reject(o.PlatypusError.fromSdkError(e))))}publishSchema(e){return this.createOrUpdate(e,i.ConflictMode.Update)}updateSchema(e,t=!1){return this.createOrUpdate(e,t?i.ConflictMode.Force:i.ConflictMode.Patch)}createOrUpdate(e,t){const r={schema:e.schema,conflictMode:t};return e.version&&(r.version=+e.version),this.cdfClient.templates.group(e.solutionId).versions.upsert(r).catch((e=>Promise.reject(o.PlatypusError.fromSdkError(e))))}runQuery(e){return this.cdfClient.templates.group(e.solutionId).version(parseInt(e.schemaVersion)).runQuery(e.graphQlParams).then((e=>e)).catch((e=>Promise.reject(o.PlatypusError.fromSdkError(e))))}}},8308:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TemplatesDataMapper=void 0,t.TemplatesDataMapper=class{serialize(e){return{externalId:e.id,description:e.description,createdTime:e.createdTime,lastUpdatedTime:e.updatedTime,owners:e.owners}}deserialize(e){return{id:e.externalId,name:e.externalId,description:e.description,createdTime:e.createdTime,updatedTime:e.lastUpdatedTime,owners:e.owners}}}},6486:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionDataModelService=void 0,t.SolutionDataModelService=class{constructor(e,t="templates"){this.graphqlService=e,this.backend=t}parseSchema(e){return this.graphqlService.parseSchema(e)}buildSchemaString(){return this.graphqlService.generateSdl()}addType(e,t){const r=this.graphqlService.addType(t);return Object.assign(Object.assign({},e),{types:[...e.types,r]})}renameType(e,t,r){let i=e;e.types.forEach((o=>{o.fields.forEach((n=>{n.type.name===t&&(i=this.updateField(e,o.name,n.name,Object.assign(Object.assign({},n),{type:Object.assign(Object.assign({},n.type),{name:r})})))}))}));const o=this.graphqlService.updateType(t,{name:r});return Object.assign(Object.assign({},i),{types:i.types.map((e=>e.name===t?o:e))})}removeType(e,t){return e.types.forEach((r=>{r.fields.forEach((i=>{i.type.name===t&&this.removeField(e,r.name,i.name)}))})),this.graphqlService.removeType(t),Object.assign(Object.assign({},e),{types:e.types.filter((e=>e.name!==t))})}addField(e,t,r,i){const o=this.graphqlService.addField(t,r,i);return Object.assign(Object.assign({},e),{types:e.types.map((e=>e.name===t?Object.assign(Object.assign({},e),{fields:[...e.fields,o]}):e))})}updateField(e,t,r,i){const o=this.graphqlService.updateTypeField(t,r,i);return Object.assign(Object.assign({},e),{types:e.types.map((e=>e.name===t?Object.assign(Object.assign({},e),{fields:e.fields.map((e=>e.name===r?o:e))}):e))})}removeField(e,t,r){return this.graphqlService.removeField(t,r),Object.assign(Object.assign({},e),{types:e.types.map((e=>e.name===t?Object.assign(Object.assign({},e),{fields:e.fields.filter((e=>e.name!==r))}):e))})}getCustomTypesNames(e){return e.types.map((e=>e.name))}getSupportedPrimitiveTypes(){return Promise.resolve([{name:"String",type:"SCALAR"},{name:"Int",type:"SCALAR"},{name:"Float",type:"SCALAR"},{name:"Boolean",type:"SCALAR"},{name:"ID",type:"SCALAR"},{name:"Long",type:"SCALAR"},{name:"TimeSeries",type:"OBJECT"},{name:"SyntheticTimeSeries",type:"OBJECT"},{name:"Sequence",type:"OBJECT"},{name:"File",type:"OBJECT"},{name:"Asset",type:"OBJECT"},{name:"Event",type:"OBJECT"},{name:"template",type:"DIRECTIVE",fieldDirective:!1}])}clear(){this.graphqlService.clear()}}},5776:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionSchemaHandler=void 0;const i=r(3099),o=r(5036),n=r(9842);t.SolutionSchemaHandler=class{constructor(e){this.solutionSchemaService=e}version(e){const t=this.validate(e,["solutionId"]);return t.valid?this.solutionSchemaService.fetchSchemaVersion(e).then((e=>i.Result.ok(e))):Promise.reject(i.Result.fail(t.errors))}versions(e){const t=this.validate(e,["solutionId"]);return t.valid?this.solutionSchemaService.listSchemaVersions(e).then((e=>i.Result.ok(e))):Promise.reject(i.Result.fail(t.errors))}publish(e){const t=this.validate(e,["solutionId"]);return t.valid?this.solutionSchemaService.publishSchema(e).then((e=>i.Result.ok(e))).catch((e=>i.Result.fail(e))):Promise.reject(i.Result.fail(t.errors))}update(e){return this.solutionSchemaService.updateSchema(e).then((e=>i.Result.ok(e))).catch((e=>i.Result.fail(e)))}runQuery(e){const t=this.validate(e,["solutionId"]);return t.valid?this.solutionSchemaService.runQuery(e).then((e=>i.Result.ok(e))):Promise.reject(i.Result.fail(t.errors))}validate(e,t){const r=new o.Validator(e);return t.forEach((e=>r.addRule(e,new n.RequiredFieldValidator))),r.validate()}}},6236:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionsHandler=void 0;const i=r(7070),o=r(5036),n=r(9842);t.SolutionsHandler=class{constructor(e){this.solutionsService=e}list(){return this.solutionsService.listSolutions().then((e=>i.Result.ok(e)))}fetch(e){return this.solutionsService.fetchSolution(e).then((e=>i.Result.ok(e)))}create(e){const t=new o.Validator(e);t.addRule("name",new n.RequiredFieldValidator);const r=t.validate();return r.valid?this.solutionsService.createSolution(e).then((e=>i.Result.ok(e))).catch((e=>409===e.code?i.Result.fail({name:"Solution name already exists."}):i.Result.fail(e))):(console.error(r.errors),Promise.resolve(i.Result.fail(r.errors)))}delete(e){return this.solutionsService.deleteSolution(e).then((e=>i.Result.ok(e))).catch((e=>403===e.code?i.Result.fail({name:"Failed to delete the solution, insufficient access rights."}):i.Result.fail(e)))}}},5287:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionSchemaStatus=void 0,(r=t.SolutionSchemaStatus||(t.SolutionSchemaStatus={})).DRAFT="DRAFT",r.PUBLISHED="PUBLISHED"},3809:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionDataModelFieldNameValidator=void 0;var i=r(6433);Object.defineProperty(t,"SolutionDataModelFieldNameValidator",{enumerable:!0,get:function(){return i.SolutionDataModelFieldNameValidator}})},6433:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SolutionDataModelFieldNameValidator=void 0;const i=r(5036);class o extends i.ValidationRule{validate(e,t){return t&&t.match(/^(?![_0-9]+)[a-zA-Z0-9_]+$/g)?{valid:!0,errors:{}}:{valid:!1,errors:{[e]:this.validationMessage||e+" must be camelCase"}}}}t.SolutionDataModelFieldNameValidator=o},4705:e=>{e.exports=require("@azure/msal-node")},7669:e=>{e.exports=require("@cognite/sdk")},7589:e=>{e.exports=require("@cognite/sdk-v6")},1286:e=>{e.exports=require("@graphql-codegen/core")},1749:e=>{e.exports=require("@graphql-codegen/typescript")},3333:e=>{e.exports=require("@graphql-codegen/typescript-apollo-angular")},6637:e=>{e.exports=require("@graphql-codegen/typescript-operations")},7367:e=>{e.exports=require("@graphql-codegen/typescript-react-apollo")},1984:e=>{e.exports=require("@graphql-codegen/typescript-resolvers")},5022:e=>{e.exports=require("chalk")},3593:e=>{e.exports=require("cli-table")},9242:e=>{e.exports=require("conf")},9950:e=>{e.exports=require("configstore")},6974:e=>{e.exports=require("debug")},2411:e=>{e.exports=require("enquirer")},6860:e=>{e.exports=require("express")},7343:e=>{e.exports=require("graphql")},5567:e=>{e.exports=require("jwt-decode")},8941:e=>{e.exports=require("mixpanel")},6634:e=>{e.exports=require("open")},9369:e=>{e.exports=require("process")},2711:e=>{e.exports=require("qrcode-terminal")},752:e=>{e.exports=require("tslib")},2643:e=>{e.exports=require("update-notifier")},5828:e=>{e.exports=require("uuid")},9760:e=>{e.exports=require("yargs")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},8914:e=>{e.exports=JSON.parse('{"name":"@cognite/cdf-cli","version":"0.0.1-alpha.21","description":"A CLI for Cognite Data Fusion","repository":{"type":"git","url":"https://github.com/cognitedata/platypus.git","directory":"apps/platypus-cdf-cli"},"author":"Cognite","license":"Apache-2.0","main":"./main.js","engines":{"node":">=14.18.2"},"bin":{"cdf":"./main.js"},"dependencies":{"@cognite/sdk":"5.4.0","tslib":"^2.0.0"},"resolutions":{"graphql":"^15.6.1"}}')}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}var i={};(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0});const t=r(752),o=t.__importStar(r(9760)),n=t.__importDefault(r(5022)),a=r(177),s=t.__importStar(r(3511)),l=t.__importStar(r(3237)),c=t.__importStar(r(350)),d=r(5789),u=t.__importDefault(r(6832)),p=t.__importDefault(r(7858)),m=t.__importDefault(r(8413)),g=r(4556),h=r(9575),f=r(8929),_=g.DEBUG.extend("main");o.scriptName(h.CONSTANTS.APP_ID).strict().middleware([d.init,a.authenticate]).demandCommand(1).command(s).command(l).command(c).command(p.default).command(u.default).command(m.default).option("verbose",{type:"boolean",alias:"v",default:!1,describe:"Show debug messages"}).option("interactive",{type:"boolean",default:!0,describe:"Show prompts and ask for user inputs"}).version().help(!0).fail(((e,t,{argv:r,help:i})=>{var o;_(`Error occurred and caught by main handler: ${e}, ${t}`),console.error(n.default.red(e||t.message||"Something went wrong, and we are unable to detect what please contact us for more info")),null===(o=f.getMixpanel())||void 0===o||o.track("failed command",{message:e||t.message}),console.log("\nUsages:\n"),console.error(i()),process.exit(1)})).parse(),e.default=o.default})();var o=exports;for(var n in i)o[n]=i[n];i.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();